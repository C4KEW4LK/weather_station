#pragma once

static const char UPLOAD_HTML[] PROGMEM = R"HTML(<!DOCTYPE html><html><head><meta charset="utf-8"/><meta name="viewport" content="width=device-width,initial-scale=1"/><title>Upload Files</title><style>body{font-family:system-ui,sans-serif;margin:20px;max-width:600px;background:#f5f5f5}.card{border:1px solid #ddd;border-radius:8px;padding:20px;margin:16px 0;background:#fff;box-shadow:0 2px 4px rgba(0,0,0,.1)}h2{margin-top:0;color:#333}h3{margin-top:0;font-size:16px;color:#555}button{padding:10px 20px;border:1px solid #0275d8;border-radius:4px;background:#0275d8;color:#fff;cursor:pointer;font-size:14px;font-weight:500;margin-top:8px}button:hover{background:#025aa5}button:disabled{background:#ccc;border-color:#ccc;cursor:not-allowed}input[type=file]{margin:12px 0;padding:8px;border:1px solid #ddd;border-radius:4px;width:100%;box-sizing:border-box;font-size:14px}.success{color:#28a745;font-weight:500}.error{color:#dc3545;font-weight:500}.info{color:#666;font-size:14px;margin-bottom:16px}.lbl{display:block;margin-bottom:4px;font-weight:500;color:#555}.mb{margin-bottom:12px}</style></head><body><h2>Upload Web Files</h2><div class="info">Upload web files to the SD card (/web directory)</div><div class="card"><h3>Select Files</h3><div class="mb"><label class="lbl">index.html</label><input type="file" id="h" accept=".html"/></div><div class="mb"><label class="lbl">app.js</label><input type="file" id="j" accept=".js"/></div><div class="mb"><label class="lbl">uPlot.iife.min.js</label><input type="file" id="u" accept=".js"/></div><div class="mb"><label class="lbl">Password</label><input type="password" id="p" placeholder="Password" style="width:200px;padding:8px;border:1px solid #ddd;border-radius:4px;font-size:14px"/></div><button onclick="up()">Upload</button><div id="s"></div></div><div class="card"><a href="/" style="color:#0275d8">Back to Dashboard</a></div><script>async function up(){const h=document.getElementById('h'),j=document.getElementById('j'),u=document.getElementById('u'),p=document.getElementById('p'),s=document.getElementById('s'),b=event.target,hf=h.files&&h.files[0],jf=j.files&&j.files[0],uf=u.files&&u.files[0];if(!hf&&!jf&&!uf){s.innerHTML='<p class="error">Please select at least one file</p>';return}if(!p.value||!p.value.trim().length){s.innerHTML='<p class="error">Password required</p>';return}const pw=p.value.trim();b.disabled=true;s.innerHTML='<p class="info">Uploading...</p>';const ups=[];if(hf)ups.push({f:hf,n:'index.html'});if(jf)ups.push({f:jf,n:'app.js'});if(uf)ups.push({f:uf,n:'uPlot.iife.min.js'});let ok=0,fail=0,msg=[];for(const x of ups){const fd=new FormData();fd.append('file',x.f);fd.append('path','/web/'+x.n);fd.append('pw',pw);try{const r=await fetch('/upload',{method:'POST',body:fd}),res=await r.json();if(res.ok){ok++;msg.push('<p class="success">'+x.n+': OK ('+res.bytes+' bytes)</p>')}else{fail++;msg.push('<p class="error">'+x.n+': Failed - '+(res.error||'unknown')+'</p>')}}catch(e){fail++;msg.push('<p class="error">'+x.n+': Error - '+e.message+'</p>')}}s.innerHTML=msg.join('');if(ok>0&&fail===0){s.innerHTML+='<p class="success">Done! Redirecting...</p>';p.value='';h.value='';j.value='';u.value='';setTimeout(()=>{window.location.href='/'},1500)}else{b.disabled=false}}</script></body></html>)HTML";
